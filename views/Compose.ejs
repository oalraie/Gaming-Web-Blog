 <%- include("partials/header") %>
<div class="container">
      <!-- Hero Section -->
<section class="hero-section text-center text-white">
  <div class="hero-overlay">
    <div class="container py-5">
      <h2 class="pt-5 display-5 fw-bold">Add your own Article</h2>
      <p class="lead">Below enter information related to your article.</p>
    </div>
  </div>
</section>


      <div class="col" style="color: white;">
        
        <div class="col-md-8 order-md-1 justify-content-center mx-auto dark-card p-4 rounded">
          <h4 class="mb-3">Article form</h4>
          <form class="needs-validation" action="/submit" method="POST" enctype="multipart/form-data" novalidate>
            <div class="mb-3">
              <label for="title">Article Title</label>
              <input type="text" class="form-control" id="title" name="title" placeholder="Enter article title" required="">
              <div class="invalid-feedback">
                Please enter your Article Title.
              </div>
            </div>
            <div class="mb-3">
              <label for="article" class="form-label">Article</label>
              <textarea
                class="form-control"
                id="article"
                name="article"
                placeholder="Enter your Article"
                rows="8"
                style="resize: vertical; min-height: 150px; max-height: 600px;"
                maxlength="10000"
                required
              ></textarea>
              <div class="invalid-feedback">
                Please enter your Article.
              </div>
            </div>
  
            <div class="mb-3">
              <label for="brief">Article Brief</label>
              <input type="text" class="form-control" id="brief" name="brief" placeholder="Brief description of your article" required="">
              <div class="invalid-feedback">
                Please enter your Article Brief.
              </div>
            </div>

   <div class="mb-3">
    <label for="image" class="form-label">Cover image</label>
    <input type="file" class="form-control" id="image" name="image" accept="image/*" required>
    <div class="invalid-feedback">Please upload an image.</div>
  </div>
</div>
 <hr class="mb-4">
            <button class="btn btn-primary btn-lg btn-block" type="submit">Publish Article</button>
          </form>
        </div>
      </div>

    
    </div>


      <section>
    <div class="album py-5">
      <div class="container">
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">

          <% for (let i=0; i < articles.length; i++) { const a=articles[i]; %>
            <div class="col">
              <div class="card h-100 border-0 rounded-5 overflow-hidden dark-card">
                <% const cardImageUrl=a.imageUrl || "/images/placeholder.jpg" ; %>
                  <div class="card-cover"
                    style="background-image: url('<%= cardImageUrl %>'); background-size: cover; background-position: center; background-repeat: no-repeat; height: 225px;">
                  </div>

                  <div class="card-body d-flex flex-column justify-content-between">
                    <div>
                      <h5 class="card-title mb-2">
                        <%= a.title %>
                      </h5>
                      <p class="card-text mb-3">
                        <%= a.brief %>
                      </p>
                    </div>

                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <!-- View button - takes user to read the full article -->
                        <a href="/articles/<%= a.id %>" class="btn btn-sm btn-outline-light">View</a>
                        
                        <!-- Update button - takes user to edit form -->
                        <a href="/articles/<%= a.id %>/edit" class="btn btn-sm btn-outline-warning">Update</a>
                        
                        <!-- Delete button - uses form to send POST request for deletion -->
                        <form method="POST" action="/articles/<%= a.id %>/delete" style="display: inline;">
                          <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Are you sure you want to delete this article?')">Delete</button>
                        </form>
                      </div>
                      <small class="text-bg">
                        <%= new Date(a.createdAt).toLocaleTimeString([], { hour: '2-digit' , minute: '2-digit' }) %>
                      </small>
                    </div>
                  </div>
              </div>
            </div>
            <% } %>

        </div>
      </div>
    </div>
  </section>

 <%- include("partials/footer") %>
