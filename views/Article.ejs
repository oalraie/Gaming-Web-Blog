<%- include("partials/header") %>

<style>
  /* Fixed transparent header (adjust height to your header) */
  header.site-header { width: 100%; padding: 1rem 0; }

  /* Space below fixed header */
  main { padding-top: 72px; }

  /* Article section */
  section.article-section {
    max-width: 900px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  /* Cover image area (same style as cards) */
  .article-image {
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    height: 300px;
    border-radius: 15px;
    margin-bottom: 2rem;
  }

  /* Title */
  h1.article-title {
    font-weight: 700;
    margin-bottom: 0.5rem;
    text-align: center;
    color: #fff;
  }

  /* Meta */
  .article-meta {
    text-align: center;
    color: #b7b7b7;
    margin-bottom: 1.5rem;
    font-size: 0.95rem;
  }

  /* Body */
  p.article-body {
    font-size: 1.1rem;
    line-height: 40px; /* your requested height */
    color: #fff;
    white-space: pre-wrap; /* keep user line breaks */
    margin-bottom: 0;
  }
</style>

<main>
  <section class="article-section">
    
    <!-- Flash Messages Display -->
    <% if (typeof successMessage !== 'undefined' && successMessage) { %>
      <div class="alert alert-success alert-dismissible fade show" role="alert">
        <%= successMessage %>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    <% } %>
    
    <% if (typeof errorMessage !== 'undefined' && errorMessage) { %>
      <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <%= errorMessage %>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    <% } %>

    <!-- Title -->
    <h1 class="article-title"><%= article.title %></h1>

    <!-- Publish time -->
    <div class="article-meta">
      <%= new Date(article.createdAt).toLocaleString([], { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' }) %>
    </div>

    <!-- Image (fallback to placeholder if none) -->
    <% const imageUrl = article.imageUrl || "/images/placeholder.jpg"; %>
    <div class="article-image"
         style="background-image: url('<%= imageUrl %>');"
         aria-label="<%= article.title %>">
    </div>

    <!-- Optional brief / summary -->
    <% if (article.brief) { %>
      <p class="article-body" style="opacity: 0.9; font-weight: 500; margin-bottom: 1.75rem;">
        <%= article.brief %>
      </p>
    <% } %>

    <!-- Full text -->
    <p class="article-body"><%= article.article %></p>

    <!-- Article Management Buttons -->
    <div class="text-center mt-4">
      <div class="btn-group" role="group">
        <!-- Edit button - takes user to edit form -->
        <a href="/articles/<%= article.id %>/edit" class="btn btn-warning">
          <i class="bi bi-pencil"></i> Edit Article
        </a>
        
        <!-- Delete button - shows confirmation before deletion -->
        <form method="POST" action="/articles/<%= article.id %>/delete" style="display: inline;">
          <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this article? This action cannot be undone.')">
            <i class="bi bi-trash"></i> Delete Article
          </button>
        </form>
      </div>
      
      <!-- Back to home button -->
      <div class="mt-3">
        <a href="/" class="btn btn-outline-light">
          <i class="bi bi-arrow-left"></i> Back to Articles
        </a>
      </div>
    </div>

  </section>
</main>

<%- include("partials/footer") %>
